<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-icon name="arrow-back" routerLink="/orders-tabs/list" routerDirection="back"></ion-icon>
    </ion-buttons>
    <ion-title>Order Details</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <br>
  <form [formGroup]="addEmp" (ngSubmit)="addEmpVal(addEmp.value)">

    <ion-item id="custom-item" counter="true" [counterFormatter]="customCounterFormatter">
      <ion-label position="floating">Name <ion-text color="danger">*</ion-text></ion-label>
      <ion-input required maxlength="30" formControlName="name" type="text" placeholder="ex.Ahmed"></ion-input>
    </ion-item>

    <ion-item lines="none" *ngIf="addEmp.controls['name'].hasError('required') && addEmp.controls['name'].touched">
      <ion-text color="danger">Sorry, field name is required!</ion-text>
    </ion-item>
    <ion-item lines="none" *ngIf="addEmp.controls['name'].hasError('pattern') && addEmp.controls['name'].touched">
      <ion-text color="danger">Sorry, only small and capital letters are allowed!</ion-text>
    </ion-item>
    <ion-item lines="none" *ngIf="addEmp.controls['name'].hasError('minlength') && addEmp.controls['name'].touched">
      <ion-text color="danger">Sorry, minimum name length is 2!</ion-text>
    </ion-item>
    <ion-item lines="none" *ngIf="addEmp.controls['name'].hasError('maxlength') && addEmp.controls['name'].touched">
      <ion-text color="danger">Sorry, maximum name length is 30!</ion-text>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Email <ion-text color="danger">*</ion-text></ion-label>
      <ion-input required formControlName="email" type="email" placeholder="ex.email@exp.com"></ion-input>
    </ion-item>

    <ion-item lines="none" *ngIf="addEmp.controls['email'].hasError('required') && addEmp.controls['email'].touched">
      <ion-text color="danger">Sorry, field email is required!</ion-text>
    </ion-item>
    <ion-item lines="none" *ngIf="addEmp.controls['email'].hasError('pattern') && addEmp.controls['email'].touched">
      <ion-text color="danger">Sorry, ensure the email formate!</ion-text>
    </ion-item>

    <ion-item>
      <ion-label position="floating">Password <ion-text color="danger">*</ion-text></ion-label>
      <ion-input required formControlName="pass" type="password"></ion-input>
    </ion-item>
    <ion-item lines="none" *ngIf="addEmp.controls['pass'].hasError('required') && addEmp.controls['pass'].touched">
      <ion-text color="danger">Sorry, field password is required!</ion-text>
    </ion-item>
    <ion-item lines="none" *ngIf="addEmp.controls['pass'].hasError('minlength') && addEmp.controls['pass'].touched">
      <ion-text color="danger">Sorry, minimum password length is 8!</ion-text>
    </ion-item>

    <ion-item counter="true" [counterFormatter]="phoneCounterFormatter">
      <ion-label position="floating">Phone<ion-text color="danger">*</ion-text></ion-label>
      <ion-input required maxlength="8" formControlName="phone" type="number" placeholder="12345678"></ion-input>
    </ion-item>
    <ion-item lines="none" *ngIf="addEmp.controls['phone'].hasError('required') && addEmp.controls['phone'].touched">
      <ion-text color="danger">Sorry, field phone is required!</ion-text>
    </ion-item>
    <ion-item lines="none" *ngIf="addEmp.controls['phone'].hasError('minlength') && addEmp.controls['phone'].touched">
      <ion-text color="danger">Sorry, minimum phone length is 8!</ion-text>
    </ion-item>

    <ion-item>
      <ion-label position="floating">
        Image
        <ion-text color="danger">*</ion-text></ion-label>
      <ion-input formControlName="img" type="text"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label>Supplier Name</ion-label>
      <ion-select formControlName="img" placeholder="Select Supplier">
        <ion-select-option *ngFor="let s of d.sups()" value="{{s.id}}">{{s.name}}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-button class="button-down" routerLink="/emp-list" routerDirection="back" block color="primary" type="submit"
      expand="block" [disabled]="addEmp.invalid">
      Submit
    </ion-button>
  </form>



  <ion-item lines="none">
    <ion-label color="primary" position="stacked">
      <h2>
        Supplier Name
      </h2>
    </ion-label>
    <h2 class="detailsField">
      {{d.getUser(o.sup)?.name}}
    </h2>
  </ion-item>
  <br>
  <ion-item lines="none">
    <ion-label color="primary" position="stacked">
      <h2>
        Ordered Date
      </h2>
    </ion-label>
    <h2 class="detailsField">
      {{o.orderedDate|date:"fullDate"}}
    </h2>
  </ion-item>
  <br>
  <br>
  <ion-item lines="none">
    <ion-label color="primary" position="stacked">
      <h2>
        Expected Date
      </h2>
    </ion-label>
    <h2 class="detailsField">
      {{o.expectedDate|date:"fullDate"}}
    </h2>
  </ion-item>
  <br>

  <ion-card>
    <ion-list *ngIf="cartIds.length>0">
      <ion-card-header>
        <ion-card-title>Order Products</ion-card-title>
      </ion-card-header>
      <ion-grid fixed>
        <ion-row class="detailsField">
          <ion-col size="3">
            <div class="ion-text-center">

              <h4>Qty.</h4>

            </div>
          </ion-col>
          <ion-col size="6">
            <div class="ion-text-center">

              <h4>Name</h4>

            </div>
          </ion-col>
          <ion-col size="3">
            <div class="ion-text-center">
              <h4>Price</h4>
            </div>
          </ion-col>
        </ion-row>

        <ion-row *ngFor="let pId of cartIds">
          <ion-col size="3">
            <div class="ion-text-center">
              <h4>{{o.cartItems[pId]}}</h4>
            </div>
          </ion-col>
          <ion-col size="6">
            <div class="ion-text-center">
              <h4>{{d.getProduct(pId)?.name}}</h4>
            </div>
          </ion-col>
          <ion-col size="3">
            <div class="ion-text-center">
              <h4>{{d.getProduct(pId)?.price|currency}}</h4>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-list>
  </ion-card>


</ion-content>
