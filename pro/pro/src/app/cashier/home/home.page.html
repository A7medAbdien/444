<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>home</ion-title>
  </ion-toolbar>
</ion-header>
<style>
  ion-thumbnail {
    --size: 140px;
    --border-radius: 14px;
    margin: 10px;
  }
</style>
<ion-content>
  <ion-searchbar (ionChange)="cashier.filterList($event)" animated="true" placeholder="Search"></ion-searchbar>


  <ion-list *ngIf="!cashier.isFiltered">
    <ion-card *ngFor="let prod of cashier.products">


      <ion-item *ngIf="prod.quantity>prod.skut" lines="none">
        <ion-thumbnail slot="start" [routerLink]="['/item-details',prod.id]">
          <img alt="Silhouette of mountains" src="{{prod.image}}" />
        </ion-thumbnail>

        <ion-label [routerLink]="['/item-details',prod.id]">
          <h2>{{prod.name}}</h2>
          <p>{{prod.quantity}}</p>
          <h3>${{prod.price}}</h3>
        </ion-label>

        <ion-item lines="none" style="--border-radius: 15px;">
          <ion-button (click)="cashier.addToCart(prod.id)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="add-circle-outline"></ion-icon>
          </ion-button>

          <ion-label>{{cashier.cartItems[prod.id!]||0}}</ion-label>

          <ion-button (click)="cashier.removeToCart(prod.id!)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="remove-circle-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-item>

      <ion-item *ngIf="prod.quantity==prod.skut" lines="none" color="warning">
        <ion-thumbnail slot="start" [routerLink]="['/item-details',prod.id]">
          <img alt="Silhouette of mountains" src="{{prod.image}}" />
        </ion-thumbnail>

        <ion-label [routerLink]="['/item-details',prod.id]">
          <h2>{{prod.name}}</h2>
          <p>{{prod.quantity}}</p>
          <h3>${{prod.price}}</h3>
        </ion-label>

        <ion-item lines="none" style="--border-radius: 15px;">
          <ion-button (click)="cashier.addToCart(prod.id)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="add-circle-outline"></ion-icon>
          </ion-button>

          <ion-label>{{cashier.cartItems[prod.id!]||0}}</ion-label>

          <ion-button (click)="cashier.removeToCart(prod.id!)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="remove-circle-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-item>

      <ion-item *ngIf="prod.quantity<prod.skut" lines="none" color="danger">
        <ion-thumbnail slot="start" [routerLink]="['/item-details',prod.id]">
          <img alt="Silhouette of mountains" src="{{prod.image}}" />
        </ion-thumbnail>

        <ion-label [routerLink]="['/item-details',prod.id]">
          <h2>{{prod.name}}</h2>
          <p>{{prod.quantity}}</p>
          <h3>${{prod.price}}</h3>
        </ion-label>

        <ion-item lines="none" style="--border-radius: 15px;">
          <ion-button (click)="cashier.addToCart(prod.id)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="add-circle-outline"></ion-icon>
          </ion-button>

          <ion-label>{{cashier.cartItems[prod.id!]||0}}</ion-label>

          <ion-button (click)="cashier.removeToCart(prod.id!)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="remove-circle-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-item>
    </ion-card>
  </ion-list>


  <ion-list *ngIf="cashier.isFiltered">
    <ion-card *ngFor="let prod of cashier.filteredList">
      <ion-item *ngIf="prod.quantity>prod.skut" lines="none">
        <ion-thumbnail slot="start" [routerLink]="['/item-details',prod.id]">
          <img alt="Silhouette of mountains" src="{{prod.image}}" />
        </ion-thumbnail>

        <ion-label [routerLink]="['/item-details',prod.id]">
          <h2>{{prod.name}}</h2>
          <p>{{prod.quantity}}</p>
          <h3>${{prod.price}}</h3>
        </ion-label>

        <ion-item lines="none" style="--border-radius: 15px;">
          <ion-button (click)="cashier.addToCart(prod.id)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="add-circle-outline"></ion-icon>
          </ion-button>

          <ion-label>{{cashier.cartItems[prod.id!]||0}}</ion-label>

          <ion-button (click)="cashier.removeToCart(prod.id!)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="remove-circle-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-item>

      <ion-item *ngIf="prod.quantity==prod.skut" lines="none" color="warning">
        <ion-thumbnail slot="start" [routerLink]="['/item-details',prod.id]">
          <img alt="Silhouette of mountains" src="{{prod.image}}" />
        </ion-thumbnail>

        <ion-label [routerLink]="['/item-details',prod.id]">
          <h2>{{prod.name}}</h2>
          <p>{{prod.quantity}}</p>
          <h3>${{prod.price}}</h3>
        </ion-label>

        <ion-item lines="none" style="--border-radius: 15px;">
          <ion-button (click)="cashier.addToCart(prod.id)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="add-circle-outline"></ion-icon>
          </ion-button>

          <ion-label>{{cashier.cartItems[prod.id!]||0}}</ion-label>

          <ion-button (click)="cashier.removeToCart(prod.id!)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="remove-circle-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-item>

      <ion-item *ngIf="prod.quantity<prod.skut" lines="none" color="danger">
        <ion-thumbnail slot="start" [routerLink]="['/item-details',prod.id]">
          <img alt="Silhouette of mountains" src="{{prod.image}}" />
        </ion-thumbnail>

        <ion-label [routerLink]="['/item-details',prod.id]">
          <h2>{{prod.name}}</h2>
          <p>{{prod.quantity}}</p>
          <h3>${{prod.price}}</h3>
        </ion-label>

        <ion-item lines="none" style="--border-radius: 15px;">
          <ion-button (click)="cashier.addToCart(prod.id)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="add-circle-outline"></ion-icon>
          </ion-button>

          <ion-label>{{cashier.cartItems[prod.id!]||0}}</ion-label>

          <ion-button (click)="cashier.removeToCart(prod.id!)" fill="clear" shape="round">
            <ion-icon slot="icon-only" name="remove-circle-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-item>
    </ion-card>
  </ion-list>

</ion-content>
<ion-footer>
  <ion-item routerLink="/cart" routerDirection="forward" color="primary" class="my" *ngIf="cashier.getCartLength()>0">
    <ion-icon name="cart" slot="start"></ion-icon> {{cashier.getCartLength()}} Items
    <ion-label slot="end">Total: {{cashier.calcCartTotal()}}</ion-label>
  </ion-item>
</ion-footer>
